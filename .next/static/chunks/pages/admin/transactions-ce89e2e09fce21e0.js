(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[827],{1634:(e,r,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/transactions",function(){return s(6947)}])},6947:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i});var a=s(7876),t=s(4232),d=s(7257),n=s(9099),c=s(7432);function i(){let[e,r]=(0,t.useState)([]),s=(0,n.useRouter)(),i=(0,d.A)();(0,t.useEffect)(()=>{i.auth.getUser().then(e=>{let{data:r}=e,a=null==r?void 0:r.user;a&&c.j.includes(a.id)||s.push("/")}),l()},[]);let l=async()=>{let{data:e,error:s}=await i.from("transactions").select("\n        id,\n        listing_id,\n        buyer_id,\n        purchase_price,\n        purchased_at,\n        listings (title),\n        profiles (email)\n      ").order("purchased_at",{ascending:!1});console.log("Fetched transactions:",e),s?console.error("Error fetching transactions:",s):r(e)};return l(),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-950 text-white p-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Transaction History"}),0===e.length?(0,a.jsx)("p",{children:"No transactions recorded yet."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full border border-gray-700",children:[(0,a.jsx)("thead",{className:"bg-gray-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-700",children:"Buyer"}),(0,a.jsx)("th",{className:"p-2 border border-gray-700",children:"Listing ID"}),(0,a.jsx)("th",{className:"p-2 border border-gray-700",children:"Amount"}),(0,a.jsx)("th",{className:"p-2 border border-gray-700",children:"Status"}),(0,a.jsx)("th",{className:"p-2 border border-gray-700",children:"Date"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>{var r;return(0,a.jsxs)("tr",{className:"text-sm",children:[(0,a.jsx)("td",{className:"p-2 border border-gray-800",children:e.buyer_id}),(0,a.jsx)("td",{className:"p-2 border border-gray-800",children:e.listing_id}),(0,a.jsxs)("td",{className:"p-2 border border-gray-800",children:["$",null==(r=e.purchase_price)?void 0:r.toFixed(2)]}),(0,a.jsx)("td",{className:"p-2 border border-gray-800",children:e.status||"—"}),(0,a.jsx)("td",{className:"p-2 border border-gray-800",children:e.created_at?new Date(e.created_at).toLocaleString():"—"})]},e.id)})})]})})]})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=1634)),_N_E=e.O()}]);