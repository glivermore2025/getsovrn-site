(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[155],{1086:(e,s,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/listings",function(){return l(9919)}])},9919:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>r});var t=l(7876),a=l(4232),i=l(7257),n=l(9099),d=l(7432);function r(){let[e,s]=(0,a.useState)([]),l=(0,n.useRouter)(),r=(0,i.A)();(0,a.useEffect)(()=>{r.auth.getUser().then(e=>{let{data:s}=e,t=null==s?void 0:s.user;t&&d.j.includes(t.id)||l.push("/")}),c()},[]);let c=async()=>{let{data:e}=await r.from("listings").select("*");e&&s(e)},g=async(e,s)=>{await r.from("listings").update({is_flagged:!s}).eq("id",e),c()};return(0,t.jsxs)("div",{className:"text-white p-8 bg-gray-950 min-h-screen",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Listings"}),(0,t.jsx)("ul",{className:"space-y-2",children:e.map(e=>(0,t.jsxs)("li",{className:"border p-4 rounded bg-gray-800",children:[(0,t.jsx)("p",{className:"font-semibold",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:e.description}),(0,t.jsxs)("p",{className:"text-xs text-yellow-400 mb-2",children:["Flagged: ",e.is_flagged?"Yes":"No"]}),(0,t.jsx)("button",{onClick:()=>g(e.id,e.is_flagged),className:"text-sm px-3 py-1 rounded ".concat(e.is_flagged?"bg-green-600 hover:bg-green-700":"bg-yellow-600 hover:bg-yellow-700"),children:e.is_flagged?"Unflag":"Flag"})]},e.id))})]})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=1086)),_N_E=e.O()}]);