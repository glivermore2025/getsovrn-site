(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{2941:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(7876),i=s(9099),o=s(7328),n=s.n(o),l=s(4232),a=s(7257),u=s(6870);function d(){var e;let t=(0,i.useRouter)(),{id:s}=t.query,{user:o}=(0,u.A)(),[d,c]=(0,l.useState)(null),[p,_]=(0,l.useState)(!0),[h,m]=(0,l.useState)(!1);(0,l.useEffect)(()=>{s&&(x(s),b(s))},[s,o]);let x=async e=>{let t=(0,a.A)(),{data:s,error:r}=await t.from("buyer_posts").select("*").eq("id",e).single();r||c(s),_(!1)},b=async e=>{if(!o)return;let t=(0,a.A)(),{data:s,error:r}=await t.from("buyer_post_optins").select("id").eq("buyer_post_id",e).eq("user_id",o.id).maybeSingle();!r&&s&&m(!0)},f=async()=>{if(!o)return void alert("You must be logged in to opt in.");let e=(0,a.A)(),{error:r}=await e.from("buyer_post_optins").insert([{buyer_post_id:s,user_id:o.id}]);if(r){console.error("Error opting in:",r),alert("Failed to opt in.");return}t.push("/marketplace?refresh=true#sell")},g=async()=>{if(!o||!confirm("Are you sure you want to opt out of this post?"))return;let e=(0,a.A)(),{error:r}=await e.from("buyer_post_optins").delete().eq("buyer_post_id",s).eq("user_id",o.id);if(r){console.error("Error opting out:",r),alert("Failed to opt out.");return}t.push("/marketplace?refresh=true#sell")};return p?(0,r.jsx)("div",{className:"p-8 text-white",children:"Loading..."}):d?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-950 text-white p-8",children:[(0,r.jsx)(n(),{children:(0,r.jsxs)("title",{children:[d.title," â€“ Sovrn"]})}),(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4",children:d.title}),(0,r.jsx)("p",{className:"mb-2 text-gray-400",children:d.description}),(0,r.jsxs)("p",{className:"mb-2 text-sm",children:["Budget: $",d.budget.toFixed(2)]}),(0,r.jsxs)("p",{className:"mb-6 text-sm text-gray-400",children:["Tags: ",null==(e=d.tags)?void 0:e.join(", ")]}),(0,r.jsx)("div",{className:"space-x-4",children:h?(0,r.jsx)("button",{onClick:g,className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded",children:"Opt Out"}):(0,r.jsx)("button",{onClick:f,className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded",children:"Opt In"})})]}):(0,r.jsx)("div",{className:"p-8 text-white",children:"Post not found."})}},5350:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/buyer_posts/[id]",function(){return s(2941)}])},7328:(e,t,s)=>{e.exports=s(9269)}},e=>{e.O(0,[636,593,792],()=>e(e.s=5350)),_N_E=e.O()}]);